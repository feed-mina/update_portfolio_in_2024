<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.js' integrity='sha512-n/4gHW3atM3QqRcbCn6ewmpxcLAHGaDjpEBu4xZd47N0W2oQ+6q7oc3PXstrJYXcbNU1OHdQ1T7pAP+gi5Yu8g==' crossorigin='anonymous'></script>
</head>
<body>
    
    <h1 onclick="gogo()">폼서밋</h1>
    <input type="file" name="" id="file">
    <script>
//         ### 파일첨부 테스트
// POST http://localhost:8188/test/fileTest1.api HTTP/1.1
// Content-Type: multipart/form-data; boundary=----WebKitFormBoundary0ssT9SAK2OvMhhm4
// X-AUTH-TOKEN: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJVU0VSXzAwMDAwMTMyIiwicm9sZXMiOiJTVCIsImlhdCI6MTY5MDE2NTE5MiwiZXhwIjoxNjkwMjAxMTkyfQ.aFdbDHjrysMbvwoMdz9Mxfs5l8BzW8Kez9LIL8Hab2c

// ------WebKitFormBoundary0ssT9SAK2OvMhhm4
// Content-Disposition: form-data; name="uploadAndroidFile"; filename="my.txt"
// Content-Type: text/plain

// hello mother fucker
// ------WebKitFormBoundary0ssT9SAK2OvMhhm4
// Content-Disposition: form-data; name="paramMap"


// {"a":1,"b":33322, "r": "김치좋아"}
// ------WebKitFormBoundary0ssT9SAK2OvMhhm4--



        const url = "/test/fileTest1.api"

        function gogo(){
            const formData = new FormData();
        formData.append("paramMap", JSON.stringify({a:11, b:22}))
        formData.append("uploadAndroidFile", $("#file").get(0).files[0])
        // fetch(url, {
        //     method: "POST", 
        //     body: fo,
            

        // });
        $.ajax({
            url: url,
            data: formData,
            headers:{
                "X-AUTH-TOKEN": "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJVU0VSXzAwMDAwMTMyIiwicm9sZXMiOiJTVCIsImlhdCI6MTY5MDE2Njc3MSwiZXhwIjoxNjkwMjAyNzcxfQ.ftLD93pCssgKoAZDq9iGTF6-Ph9tPWRCZtKaSTG6jPc"
            },
            method:"POST",
            enctype: "multipart/form-data",
            contentType:false,
		      processData: false,
              success:(res) => {
                  console.log("🚀 ~ res:", res);
              }
        })
        }
    </script>
</body>
</html>